<div class="chat-popup-window" [class.minimized]="isMinimized">
  <div class="chat-header">
    <span>{{ 'CHAT.MESSAGES' | translate }}</span>
    <div class="chat-controls">
      <button (click)="toggleMinimize()">_</button>
      <button (click)="closeChat()">Ã—</button>
    </div>
  </div>

  <div class="chat-body" *ngIf="!isMinimized">
    <!-- Sidebar: List of Chats -->
    <div class="chat-sidebar">
      <div class="chat-user"
           *ngFor="let chat of dummyChats"
           (click)="selectChat(chat)"
           [class.active]="chat === selectedChat">
        {{ chat.username }}
      </div>
    </div>

    <!-- Chat Content -->
    <div class="chat-content">
      <div *ngIf="selectedChat">
        <h6 class="text-muted">{{ selectedChat.username }}</h6>
        <div class="messages">
          <div *ngFor="let msg of selectedChat.messages" class="message">
            <span [class.self]="msg.self">{{ msg.text }}</span>
          </div>
        </div>

        <!-- New message form -->
        <form class="message-input" (submit)="sendMessage()">
          <input type="text"
                 [(ngModel)]="newMessage"
                 name="message"
                 class="form-control"
                 [placeholder]="'CHAT.PLACEHOLDER' | translate"
                 required />
          <button type="submit" class="btn btn-primary">{{ 'CHAT.SEND' | translate }}</button>
        </form>
      </div>

      <div *ngIf="!selectedChat" class="no-chat">
        {{ 'CHAT.NO_CHAT_SELECTED' | translate }}
      </div>
    </div>
  </div>
</div>
