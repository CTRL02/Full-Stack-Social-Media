<div class="profile-container">
  <div class="profile-header">
    <div class="profile-avatar">
      <img [src]="user?.avatar || 'assets/default-avatar.jpg'" alt="Profile picture">
    </div>
    <h1>{{ user?.username || 'Username' }}</h1>
    <h2>{{ user?.title || 'Member' }}</h2>
  </div>

  <div class="profile-content">
    <div class="profile-section about-section">
      <h3>About</h3>
      <p>{{ user?.bio || 'No bio available' }}</p>
    </div>

    <div class="profile-section stats-section">

      <div class="stat-item">
        <span class="stat-value">{{ user?.noOfPosts || 'no posts' }}</span>
        <span class="stat-label">Posts</span>
      </div>

      <!-- Followers dropdown -->
      <div class="stat-item dropdown">
        <span class="stat-value">{{ user?.noOfFollowers || 0 }}</span>
        <span class="stat-label">Followers</span>
        <ul class="dropdown-menu">
          <li *ngFor="let follower of user?.followers">
            <img [src]="follower.avatar" alt="avatar" class="dropdown-avatar">
            <span>{{ follower.username }}</span>
          </li>
        </ul>
      </div>

      <!-- Following dropdown -->
      <div class="stat-item dropdown">
        <span class="stat-value">{{ user?.noOfFollowing || 0 }}</span>
        <span class="stat-label">Following</span>
        <ul class="dropdown-menu">
          <li *ngFor="let followee of user?.following">
            <img [src]="followee.avatar" alt="avatar" class="dropdown-avatar">
            <span>{{ followee.username }}</span>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <div class="profile-footer">
    <div class="social-links">
      <a *ngFor="let link of user?.socialLinks" [href]="link" target="_blank" class="social-link">
        <i [ngClass]="getSocialIcon(link)"></i>
      </a>
    </div>
  </div>
  <!--will do later-->
  <!--<button class="btn btn-primary">Edit Profile</button>-->

  <!-- User Posts Section -->
  <div class="profile-section posts-section" *ngIf="user?.posts?.length">
    <h3>{{ user?.username }}'s Posts</h3>

    <div class="post" *ngFor="let post of user?.posts">
      <div class="post-header">
        <img [src]="user?.avatar" class="post-avatar" alt="avatar">
        <div>
          <div class="post-username">{{ user?.username }}</div>
          <div class="post-date">{{ post?.createdAt | date:'medium' }}</div>
        </div>
      </div>
      <div class="post-content">
        <p>{{ post?.content }}</p>
      </div>
    </div>
  </div>

</div>
